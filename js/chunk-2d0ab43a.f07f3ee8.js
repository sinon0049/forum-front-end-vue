(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"album py-5 bg-light"},[i("div",{staticClass:"container"},[i("UserProfileCard",{attrs:{"initial-profile":t.Profile,"initial-is-followed":t.isFollowed}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("UserFollowingsCard",{attrs:{"initial-profile":t.Profile}}),i("br"),i("UserFollowersCard",{attrs:{"initial-profile":t.Profile}})],1),i("div",{staticClass:"col-md-8"},[i("UserCommentsCard",{attrs:{"initial-profile":t.Profile}}),i("br"),i("UserFavoritedRestaurantsCard",{attrs:{"initial-profile":t.Profile}})],1)])],1)])},a=[],s=i("1da1"),l=(i("96cf"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card mb-3"},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-4"},[i("img",{attrs:{src:t.profile.image,width:"300px",height:"300px"}})]),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),i("p",{staticClass:"card-text"},[t._v(" "+t._s(t.profile.email)+" ")]),i("ul",{staticClass:"list-unstyled list-inline"},[i("li",[i("strong",[t._v(t._s(t.profile.Comments.length))]),t._v(" 已評論餐廳")]),i("li",[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳")]),i("li",[i("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followings (追蹤者)")]),i("li",[i("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followers (追隨者)")])]),i("p"),t.isCurrentUserFit?t._e():i("div",[t.isFollowed?i("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowing.apply(null,arguments)}}},[t._v("取消追蹤")]):i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing.apply(null,arguments)}}},[t._v("追蹤")])]),t.isCurrentUserFit?i("router-link",{attrs:{to:{name:"user-edit",params:t.profile.id}}},[i("button",{staticClass:"btn btn-primary"},[t._v("修改資料")])]):t._e(),i("p")],1)])])])}),n=[],o=i("5530"),c=i("2f62"),d=i("4cce"),u=i("2fa3"),f={props:{initialProfile:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0}},data:function(){return{profile:this.initialProfile,isFollowed:this.initialIsFollowed,isCurrentUserFit:!1}},methods:{addFollowing:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].addFollowing({userId:t.profile.id});case 3:if(i=e.sent,r=i.data,"success"===r.status){e.next=7;break}throw new Error(r.message);case 7:u["a"].fire({icon:"success",title:"加入追蹤成功"}),t.isFollowed=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),u["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},deleteFollowing:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].deleteFollowing({userId:t.profile.id});case 3:if(i=e.sent,r=i.data,"success"===r.status){e.next=7;break}throw new Error(r.message);case 7:u["a"].fire({icon:"success",title:"取消追蹤成功"}),t.isFollowed=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),u["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}},watch:{initialProfile:function(t){this.profile=Object(o["a"])(Object(o["a"])({},this.profile),t),this.isCurrentUserFit=this.profile.id===this.currentUser.id},initialIsFollowed:function(t){this.isFollowed=t}},computed:Object(o["a"])({},Object(c["b"])(["currentUser"]))},p=f,h=i("2877"),m=Object(h["a"])(p,l,n,!1,null,null,null),v=m.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followings (追蹤者) ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Followings,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"user-profile",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},g=[],b={props:{initialProfile:{type:Object,required:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(o["a"])(Object(o["a"])({},this.profile),t)}}},C=b,_=Object(h["a"])(C,w,g,!1,null,null,null),F=_.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followers (追隨者) ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Followers,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"user-profile",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},O=[],P={props:{initialProfile:{type:Object,required:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(o["a"])(Object(o["a"])({},this.profile),t)}}},y=P,k=Object(h["a"])(y,j,O,!1,null,null,null),x=k.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.Comments.length))]),t._v(" 已評論餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.profile.Comments,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.Restaurant.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.Restaurant.image,width:"60",height:"60"}})])})),1)])},R=[],A={props:{initialProfile:{type:Object,required:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(o["a"])(Object(o["a"])({},this.profile),t)}}},E=A,$=Object(h["a"])(E,U,R,!1,null,null,null),q=$.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.profile.FavoritedRestaurants,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},D=[],J={props:{initialProfile:{type:Object,required:!0}},data:function(){return{profile:this.initialProfile}},watch:{initialProfile:function(t){this.profile=Object(o["a"])(Object(o["a"])({},this.profile),t)}}},B=J,z=Object(h["a"])(B,I,D,!1,null,null,null),G=z.exports,H={data:function(){return{Profile:{id:"",name:"",email:"",password:"",isAdmin:!1,image:"",createdAt:"",updatedAt:"",Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1}},components:{UserProfileCard:v,UserFollowingsCard:F,UserFollowersCard:x,UserCommentsCard:q,UserFavoritedRestaurantsCard:G},created:function(){var t=this.$route.params.id;this.fetchUser(t)},methods:{fetchUser:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,a,s,l,n,o,c,f,p,h,m,v,w,g,b,C;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d["a"].get({userId:t});case 3:r=i.sent,a=r.data,s=a.profile,l=s.id,n=s.name,o=s.email,c=s.password,f=s.isAdmin,p=s.image,h=s.createdAt,m=s.updatedAt,v=s.Comments,w=s.FavoritedRestaurants,g=s.Followers,b=s.Followings,C=a.isFollowed,e.Profile={id:l,name:n,email:o,password:c,isAdmin:f,image:p,createdAt:h,updatedAt:m,Comments:v,FavoritedRestaurants:w,Followers:g,Followings:b},e.isFollowed=C,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](0),u["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return i.stop()}}),i,null,[[0,11]])})))()}},beforeRouteUpdate:function(t,e,i){var r=t.params.id;this.fetchUser(r),i()}},K=H,L=Object(h["a"])(K,r,a,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.f07f3ee8.js.map